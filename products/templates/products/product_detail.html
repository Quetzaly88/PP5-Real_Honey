{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5">
   <div class="row align-items-center">
      <!-- product image -->
      <div class="col-md-6 text-center">
         <div id="productImagesCarousel" class="carousel slide" data_ride="carousel">
            <div class="carousel-inner">
               {% if product.image %}
               <div class="carousel-item active">
                  {% if product.image %}
                  <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
               </div>
               {% else %}
               <div class="carousel-item active"></div>
               <img src="{% static 'images/default.jpg' %}" class="img-fluid rounded" alt="Default Image">
            </div>
            {% endif %}
            {% for image in product.image_1 product.image_2 product.image_3 %}
            {% if image %}
            <div class="carousel-item">
               <img src="{{ image.image.url }}" class="img-fluid rounded" alt="{{ product.
               </div>
               {% endif %}
               {% endfor %}
            </div>
            <a class=" carousel-control-prev" href="#productImagesCarousel" role="button" data-slide="prev">
               <span class="carousel-control-prev-icon" aria-hidden="true"></span>
               <span class="sr-only">Previous</span>
               </a>
               <a class="carousel-control-next" href="#productImagesCarousel" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
               </a>
            </div>
         </div>

         <!-- product details -->
         <div class=" col-md-6">
            <h2 class="mb-3">{{ product.name }}</h2>
            <p class="lead">{{ product.description }}</p>
            <h5><strong>Season:</strong> {{ product.season }}</h5>
            <h5><strong>Flavour Tones:</strong> {{ product.flavor_tones }}</h5>
            <h4 class="text-success font-weight-bold">{{ product.price }}</h4>

            <!-- add to cart and wish list buttons -->
            <div class="mt-4 d-flex gap-2">

               <form method="POST" action="{% url 'add_to_cart' product.id %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-primary">Add to Cart</button>
               </form>

               <form method="POST" action="{% url 'add_to_wishlist' product.id %}">
                  {% csrf_token %}
                  {% if user.is_authenticated %}
                  <button type="submit" class="btn btn-outline-danger">Like</button>
                  {% else %}
                  <a href="{% url 'account_login' %}?next={{ request.path }}" class="btn btn-outline-danger">Like</a>
                  {% endif %}
               </form>

               <!-- Back to products -->
               <a href="{% url 'product_list' %}" class="btn btn-outline-secondary">Back to Products</a>
            </div>
         </div>
      </div>
   </div>

   {% endblock %}